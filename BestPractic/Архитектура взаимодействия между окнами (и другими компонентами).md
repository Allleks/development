–ù—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã¬†**—Å–ª–∞–±–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ (loose coupling)**.
#### –ü–õ–û–•–û–ô –ü–û–î–•–û–î (–ù–æ–≤–∏—á–æ–∫, "–ñ–µ—Å—Ç–∫–∞—è —Å–≤—è–∑—å")
–û–¥–Ω–æ –æ–∫–Ω–æ –Ω–∞–ø—Ä—è–º—É—é —Å–æ–∑–¥–∞–µ—Ç –∏ –º–∞–Ω–∏–ø—É–ª–∏—Ä—É–µ—Ç –¥—Ä—É–≥–∏–º, –æ–±—Ä–∞—â–∞—è—Å—å –∫ –µ–≥–æ –≤–∏–¥–∂–µ—Ç–∞–º.
```cpp
// –í MainWindow.cpp
void MainWindow::onSettingsClicked() {
    SettingsDialog *dialog = new SettingsDialog(this);
    // –ü–õ–û–•–û: –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
    dialog->ui->colorComboBox->setCurrentIndex(5);
    // –ü–õ–û–•–û: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Å–ª–æ—Ç–æ–≤
    connect(dialog, &SettingsDialog::accepted, [this, dialog]() {
        QString color = dialog->ui->colorComboBox->currentText(); // –£–ñ–ê–°!
        applyColor(color);
    });
    dialog->exec();
    delete dialog;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**¬†`MainWindow`¬†–∑–Ω–∞–µ—Ç –í–°–ï –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ¬†`SettingsDialog`. –ò–∑–º–µ–Ω–∏—Ç—Å—è –¥–∏–∞–ª–æ–≥ (–∑–∞–º–µ–Ω—é¬†`QComboBox`¬†–Ω–∞¬†`QColorDialog`) ‚Äî –ø—Ä–∏–¥–µ—Ç—Å—è –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å¬†`MainWindow`.
___
#### üü¢–•–û–†–û–®–ò–ô –ü–û–î–•–û–î (–°–∏–≥–Ω–∞–ª—ã-–°–ª–æ—Ç—ã + –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è)

–û–∫–Ω–∞ –æ–±—â–∞—é—Ç—Å—è —á–µ—Ä–µ–∑¬†**—Å–∏–≥–Ω–∞–ª—ã**¬†–∏ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã.
```cpp
// SettingsDialog.h
class SettingsDialog : public QDialog {
    Q_OBJECT
public:
    explicit SettingsDialog(QWidget *parent = nullptr);
    // –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –£–°–¢–ê–ù–û–í–ö–ò —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è)
    void setCurrentColor(const QColor &color);
    // –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ü–û–õ–£–ß–ï–ù–ò–Ø —Å–æ—Å—Ç–æ—è–Ω–∏—è
    QColor selectedColor() const;

signals:
    // –°–∏–≥–Ω–∞–ª –æ –≥–æ—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –æ —Ñ–∞–∫—Ç–µ –∑–∞–∫—Ä—ã—Ç–∏—è
    void settingsApplied(const UserSettings &settings);

private:
    // –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä—ã—Ç–∞ (—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ UI –∏–ª–∏ –≤–∏–¥–∂–µ—Ç—ã –≤ private)
    Ui::SettingsDialog *ui;
    void setupUI();
    void connectSignals();
};

// MainWindow.cpp
void MainWindow::onSettingsClicked() {
    auto *dialog = new SettingsDialog(this);
    // –•–û–†–û–®–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    dialog->setCurrentColor(m_currentColor);

    // –•–û–†–û–®–û: –î–∏–∞–ª–æ–≥ —Å–∞–º —Å–æ–æ–±—â–∞–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
    connect(dialog, &SettingsDialog::settingsApplied,
            this, &MainWindow::applySettings); // applySettings(UserSettings)

    // –ú–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ –Ω–µ—Ç - –Ω–µ –≤–∞–∂–Ω–æ. –°–≤—è–∑—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
    dialog->setAttribute(Qt::WA_DeleteOnClose);
    dialog->show();
}

void MainWindow::applySettings(const UserSettings &settings) {
    // –†–∞–±–æ—Ç–∞–µ–º —Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∞ –Ω–µ —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏
    m_currentColor = settings.color();
    updateUI();
}
```
#### –õ–£–ß–®–ò–ô –ü–û–î–•–û–î (–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π + –ü–∞—Ç—Ç–µ—Ä–Ω—ã)

–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
1. **Model-View-Controller (MVC) / Model-View-Presenter (MVP):**
    - **–ú–æ–¥–µ–ª—å (Model):**¬†–ß–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä,¬†`DataManager`,¬†`SettingsManager`).¬†**–ù–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ UI.**
    - **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (View):**¬†–í–∞—à–∏ –æ–∫–Ω–∞ –∏ –≤–∏–¥–∂–µ—Ç—ã (`MainWindow`,¬†`SettingsDialog`).¬†**–¢–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –∏ –ø–µ—Ä–µ–¥–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.**
    - **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä/–ü—Ä–µ–∑–µ–Ω—Ç–µ—Ä (Controller/Presenter):**¬†–ü–æ—Å—Ä–µ–¥–Ω–∏–∫. –°–ª—É—à–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –æ—Ç View, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Model, –æ–±–Ω–æ–≤–ª—è–µ—Ç View.
    **–ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç:**
    - –£ –≤–∞—Å –µ—Å—Ç—å¬†`SettingsModel`¬†(—á–∏—Ç–∞–µ—Ç/–ø–∏—à–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ QSettings/—Ñ–∞–π–ª).
    - `SettingsDialog`¬†(View) —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª —Å–∏–Ω–∏–π —Ü–≤–µ—Ç!".
    - `SettingsPresenter`¬†–ª–æ–≤–∏—Ç —Å–∏–≥–Ω–∞–ª, –≤—ã–∑—ã–≤–∞–µ—Ç¬†`settingsModel->setColor("blue")`.
    - `SettingsPresenter`¬†(–∏–ª–∏ —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª –º–æ–¥–µ–ª–∏) –æ–±–Ω–æ–≤–ª—è–µ—Ç¬†`SettingsDialog`: "–£—Å—Ç–∞–Ω–æ–≤–∏ —Ü–≤–µ—Ç –≤–∏–¥–∂–µ—Ç–∞ –≤ —Å–∏–Ω–∏–π".
2. **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**  
    –ù–µ —Å–æ–∑–¥–∞–≤–∞–π —Ç—è–∂–µ–ª—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`new DatabaseManager()`) –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–æ–≤ –æ–∫–æ–Ω. –ü–µ—Ä–µ–¥–∞–≤–∞–π –∏—Ö –∏–∑–≤–Ω–µ (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∏–ª–∏ —Å–µ—Ç—Ç–µ—Ä).
```cpp
    // –•–û–†–û–®–û
    class MainWindow : public QMainWindow {
        MainWindow(DatabaseManager *dbManager, SettingsManager *settings, QWidget *parent = nullptr);
    };
    // –¢–µ–ø–µ—Ä—å MainWindow –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å "–º—É–ª—è–∂–Ω–æ–π" –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
    
```
### –ö—Ä–∞—Ç–∫–∞—è –ø–∞–º—è—Ç–∫–∞ –¥–ª—è —Ç–µ–±—è:
1. **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä**¬†‚Äî –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è "—Å–∫–µ–ª–µ—Ç–∞" UI –∏¬†**–∂–∏–∑–Ω–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã—Ö**¬†—Å–≤—è–∑–µ–π.
2. **–û—Ç–¥–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã**¬†‚Äî –¥–ª—è –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏, —Å–ª–æ–∂–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –¥–µ–π—Å—Ç–≤–∏–π.
3. **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –æ–∫–Ω–∞–º–∏:**
    - **–ó–∞–±—É–¥—å –ø—Ä–æ¬†`ui->`**¬†–ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –¥—Ä—É–≥–æ–≥–æ –∫–ª–∞—Å—Å–∞.
    - **–í—ã—Å—Ç–∞–≤–ª—è–π –Ω–∞—Ä—É–∂—É —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã –∏ –ø—Ä–æ—Å—Ç—ã–µ –º–µ—Ç–æ–¥—ã**¬†(`getResult()`,¬†`setInitialData()`).
    - **–î—É–º–∞–π –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö "–¥–∞–Ω–Ω—ã–µ"**, –∞ –Ω–µ "–≤–∏–¥–∂–µ—Ç—ã". –û–¥–Ω–æ –æ–∫–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥—Ä—É–≥–æ–º—É¬†`QColor`, –∞ –Ω–µ –∏–Ω–¥–µ–∫—Å –≤¬†`QComboBox`.    
4. **–î–µ–∫–æ–º–ø–æ–∑–∏—Ä—É–π:**¬†–ë–æ–ª—å—à–æ–µ –æ–∫–Ω–æ ‚Äî —ç—Ç–æ –Ω–µ –æ–¥–∏–Ω –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å. –≠—Ç–æ:
    - –°–∞–º –∫–ª–∞—Å—Å –æ–∫–Ω–∞ (–Ω–∞—Å–ª–µ–¥–Ω–∏–∫¬†`QMainWindow`).
    - –í–æ–∑–º–æ–∂–Ω–æ, –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–∏–¥–∂–µ—Ç –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏.
    - –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞.
    - –ú–µ–Ω–µ–¥–∂–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –∂–∏–≤–µ—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é.
___
#patterns #signals #slots
