### **Могут храниться данные:**
```cpp
// 1. База данных (SQL)
QSqlDatabase database;  // SQLite, MySQL, PostgreSQL

// 2. Файлы
QFile file("data.json");  // JSON, XML, CSV, бинарные

// 3. Сетевое хранилище
QNetworkAccessManager network;  // REST API, WebSocket

// 4. Память (кеш)
QVector<DataItem> memoryCache;  // Временные данные

// 5. Локальное хранилище
QSettings settings;  // Конфигурация, настройки
```
___
## **Как данные попадают в модель:**

#### **Вариант 1: Модель сама управляет данными**
```cpp
class DatabaseBackedModel : public QAbstractTableModel {
    QSqlDatabase m_db;  // Модель управляет подключением
    
    void loadData() {
        QSqlQuery query("SELECT * FROM operations", m_db);
        // Загружаем в m_data
    }
};
```
#### **Вариант 2: Отдельный слой данных + модель**
```cpp
// Data Layer
class DataRepository : public QObject {
    QSqlDatabase m_db;
    
    QVector<Operation> fetchOperations() {
        // Чистый доступ к данным
        return queryOperationsFromDB();
    }
};

// Model Layer
class OperationsModel : public QAbstractTableModel {
    DataRepository* m_repository;
    QVector<Operation> m_data;  // Копия данных в памяти
    
    void refresh() {
        beginResetModel();
        m_data = m_repository->fetchOperations();  // Запрашиваем у репозитория
        endResetModel();
    }
};
```
___
### **Паттерны доступа к данным:**

#### **Active Record (прямой доступ)**
```cpp
// Модель знает о БД напрямую
class Operation : public QObject {
    int id;
    QString name;
    
    void save() {
        QSqlQuery query;
        query.exec(QString("INSERT INTO operations VALUES (%1, '%2')")
                   .arg(id).arg(name));
    }
};
```
#### **Repository Pattern (рекомендуется)**
```cpp
// Отдельный репозиторий
class OperationRepository {
    QSqlDatabase& m_db;
    
    QVector<Operation> getAll() {
        // Все операции БД → объекты
    }
    
    void save(const Operation& op) {
        // Объект → БД
    }
};

// Модель использует репозиторий
class OperationsModel : public QAbstractTableModel {
    OperationRepository* m_repo;
};
```
#### **Data Mapper (маппер объектов)**
```cpp
class OperationMapper {
    Operation toObject(const QSqlRecord& record) {
        Operation op;
        op.id = record.value("id").toInt();
        op.name = record.value("name").toString();
        return op;
    }
    
    QVariantMap toVariantMap(const Operation& op) {
        return {
            {"id", op.id},
            {"name", op.name}
        };
    }
};
```
___
### [[Рекомендации для продакшена]]