# Шаблон для TreeModel:
```cpp
class TreeModel : public QAbstractItemModel {
    Q_OBJECT
    
public:
    explicit TreeModel(QObject* parent = nullptr);
    ~TreeModel();
    
    // Обязательные методы
    QModelIndex index(int row, int column, 
                     const QModelIndex& parent) const override;
    QModelIndex parent(const QModelIndex& index) const override;
    int rowCount(const QModelIndex& parent) const override;
    int columnCount(const QModelIndex& parent) const override;
    QVariant data(const QModelIndex& index, int role) const override;
    
    // Для редактирования
    bool setData(const QModelIndex& index, const QVariant& value,
                int role = Qt::EditRole) override;
    Qt::ItemFlags flags(const QModelIndex& index) const override;
    
    // Для изменения структуры
    bool insertRows(int row, int count,
                   const QModelIndex& parent = QModelIndex()) override;
    bool removeRows(int row, int count,
                   const QModelIndex& parent = QModelIndex()) override;
    
    // Заголовки
    QVariant headerData(int section, Qt::Orientation orientation,
                       int role = Qt::DisplayRole) const override;
    
    // Свои методы
    void addNode(const QString& name, const QModelIndex& parent = QModelIndex());
    void removeNode(const QModelIndex& index);
    void refresh();
    
private:
    struct TreeNode {
        QString name;
        QVariant data;
        TreeNode* parent = nullptr;
        QVector<TreeNode*> children;
        
        int row() const {
            if (!parent) return 0;
            return parent->children.indexOf(const_cast<TreeNode*>(this));
        }
    };
    
    TreeNode* m_root;
    
    // Вспомогательные методы
    TreeNode* getNode(const QModelIndex& index) const;
    void destroyNode(TreeNode* node);
};
```
# Шаблон для TableModel:
```cpp
class TableModel : public QAbstractTableModel {
    Q_OBJECT
    
public:
    explicit TableModel(QObject* parent = nullptr);
    
    // Обязательные методы (упрощенные)
    int rowCount(const QModelIndex& parent = QModelIndex()) const override;
    int columnCount(const QModelIndex& parent = QModelIndex()) const override;
    QVariant data(const QModelIndex& index, int role) const override;
    QVariant headerData(int section, Qt::Orientation orientation,
                       int role = Qt::DisplayRole) const override;
    
    // Редактирование
    bool setData(const QModelIndex& index, const QVariant& value,
                int role = Qt::EditRole) override;
    Qt::ItemFlags flags(const QModelIndex& index) const override;
    
    // Структурные изменения
    bool insertRows(int row, int count,
                   const QModelIndex& parent = QModelIndex()) override;
    bool removeRows(int row, int count,
                   const QModelIndex& parent = QModelIndex()) override;
    
    // Свои методы
    void addRow(const QVariantList& data);
    void removeRow(int row);
    void updateRow(int row, const QVariantList& data);
    void setFilter(const QString& filter);
    void sortByColumn(int column, Qt::SortOrder order = Qt::AscendingOrder);
    
private:
    struct RowData {
        QVector<QVariant> columns;
        QVariant userData; // дополнительные данные
    };
    
    QVector<RowData> m_data;
    QString m_filter;
    
    // Вспомогательные методы
    bool matchesFilter(const RowData& row) const;
    void applySort(int column, Qt::SortOrder order);
};
```
# Шаблон для ListModel:
```cpp
class ListModel : public QAbstractListModel {
    Q_OBJECT
    
public:
    explicit ListModel(QObject* parent = nullptr);
    
    // Обязательные методы (самые простые)
    int rowCount(const QModelIndex& parent = QModelIndex()) const override;
    QVariant data(const QModelIndex& index, int role) const override;
    
    // Редактирование
    bool setData(const QModelIndex& index, const QVariant& value,
                int role = Qt::EditRole) override;
    Qt::ItemFlags flags(const QModelIndex& index) const override;
    
    // Структурные изменения
    bool insertRows(int row, int count,
                   const QModelIndex& parent = QModelIndex()) override;
    bool removeRows(int row, int count,
                   const QModelIndex& parent = QModelIndex()) override;
    
    // Свои методы
    void addItem(const QString& text, const QVariant& userData = QVariant());
    void removeItem(int index);
    void clear();
    QVariant getUserData(int index) const;
    
    // Drag & Drop
    Qt::DropActions supportedDropActions() const override;
    QStringList mimeTypes() const override;
    QMimeData* mimeData(const QModelIndexList& indexes) const override;
    bool dropMimeData(const QMimeData* data, Qt::DropAction action,
                     int row, int column, const QModelIndex& parent) override;
    
private:
    struct ListItem {
        QString text;
        QVariant userData;
        QIcon icon;
    };
    
    QVector<ListItem> m_items;
};
```