**1. `flags()`** - определяет, можно ли редактировать элемент:
```cpp
Qt::ItemFlags MyTreeModel::flags(const QModelIndex &index) const {
    if (!index.isValid()) return Qt::NoItemFlags;
    
    Qt::ItemFlags flags = QAbstractItemModel::flags(index);
    
    // Разрешаем редактирование только для определенных элементов
    if (index.column() == 0) { // Только первый столбец
        flags |= Qt::ItemIsEditable;
    }
    
    return flags;
}
```

**2. `setData()`** - сохраняет изменения:
```cpp
bool MyTreeModel::setData(const QModelIndex &index, const QVariant &value,
                         int role) {
    if (role != Qt::EditRole) return false;
    if (!index.isValid()) return false;
    
    // Получаем элемент по индексу
    TreeItem* item = static_cast<TreeItem*>(index.internalPointer());
    
    // Меняем данные
    item->setData(index.column(), value.toString());
    
    // Сообщаем Qt, что данные изменились
    emit dataChanged(index, index);
    
    return true;
}
```
### **3. Как работает редактирование на практике?**
**Процесс:**
1. Пользователь дважды кликает на ячейку
2. Qt проверяет `flags(index)` - есть ли флаг `Qt::ItemIsEditable`
3. Если да - показывает редактор (текстовое поле)
4. После редактирования вызывает `setData()`
5. `setData()` меняет данные и вызывает `dataChanged()`
6. TreeView перерисовывает ячейку