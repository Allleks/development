#QFile #QIODevice
___
### 1.¬†**–ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)**
```cpp
QFile file("–ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É");
if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
    qWarning() << "–û—à–∏–±–∫–∞:" << file.errorString();
    return; // –∏–ª–∏ throw
}

QByteArray data = file.readAll();  // –í—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
QString text = QString::fromUtf8(data);
// file –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä–æ–µ—Ç—Å—è
```
### 2.¬†**–° QTextStream (–∞–≤—Ç–æ-–∫–æ–¥–∏—Ä–æ–≤–∫–∞)**
```cpp
QFile file("–ø—É—Ç—å/–∫/—Ñ–∞–π–ª—É");
if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
    handleError(file.errorString());
    return;
}

QTextStream stream(&file);
stream.setCodec("UTF-8");  // –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏
QString content = stream.readAll();
```
### 3.¬†**–î–ª—è –æ–≥—Ä–æ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–ø–æ—Å—Ç—Ä–æ—á–Ω–æ)**
```cpp
QFile file("–ø—É—Ç—å/–∫/–±–æ–ª—å—à–æ–º—É/—Ñ–∞–π–ª—É");
if (!file.open(QIODevice::ReadOnly | QIODevice::Text)) {
    return;
}

QTextStream stream(&file);
QStringList lines;
while (!stream.atEnd()) {
    lines << stream.readLine();  // –ß–∏—Ç–∞–µ—Ç –±–µ–∑ '\n'
    // –∏–ª–∏ processLine(stream.readLine());
}
````
## üìÅ –¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–¥—Ö–æ–¥—ã

|–¢–∏–ø —Ñ–∞–π–ª–∞|–†–∞–∑–º–µ—Ä|–ú–µ—Ç–æ–¥ —á—Ç–µ–Ω–∏—è|–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏|
|---|---|---|---|
|**–ö–æ–Ω—Ñ–∏–≥–∏, QSS, JSON**|< 1 MB|`readAll()`|–í—Å—è –ª–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏|
|**–õ–æ–≥–∏, CSV –¥–∞–Ω–Ω—ã–µ**|1-100 MB|–ü–æ—Å—Ç—Ä–æ—á–Ω–æ (`readLine()`)|–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –ø–æ—Ç–æ–∫–µ|
|**–ë–∏–Ω–∞—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**|–õ—é–±–æ–π|`read()`|–£–∫–∞–∑–∞–Ω–∏–µ¬†`QIODevice::ReadOnly`|
|**–†–µ—Å—É—Ä—Å—ã (qrc)**|< 5 MB|`readAll()`|–ü—É—Ç—å —á–µ—Ä–µ–∑¬†`:/`|

## üé® –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### **–î–ª—è —Å—Ç–∏–ª–µ–π QSS**
```cpp
bool applyStylesheet(QWidget* widget, const QString& qssPath)
{
    QString style = loadTextFile(qssPath);
    if (style.isEmpty()) {
        style = loadTextFile(":/styles/default.qss"); // –§–æ–ª–±—ç–∫
    }
    
    if (!style.isEmpty()) {
        widget->setStyleSheet(style);
        return true;
    }
    return false;
}
```

### **–î–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**
```cpp
QMap<QString, QString> loadConfig(const QString& path)
{
    QMap<QString, QString> config;
    
    foreach (const QString& line, loadTextFile(path).split('\n')) {
        if (line.trimmed().startsWith('#') || line.isEmpty()) 
            continue;
        
        QStringList parts = line.split('=');
        if (parts.size() == 2) {
            config[parts[0].trimmed()] = parts[1].trimmed();
        }
    }
    
    return config;
}
```
### **–ß—Ç–µ–Ω–∏–µ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º (–¥–ª—è UI)**
```cpp
void readFileWithProgress(const QString& path, QProgressBar* progress)
{
    QFile file(path);
    file.open(QIODevice::ReadOnly);
    
    progress->setMaximum(file.size());
    QByteArray data;
    
    while (!file.atEnd()) {
        data.append(file.read(8192));  // –ß—Ç–µ–Ω–∏–µ –±–ª–æ–∫–∞–º–∏
        progress->setValue(file.pos()); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        QCoreApplication::processEvents(); // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º UI
    }
    
    emit fileLoaded(QString::fromUtf8(data));
}
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

```cpp
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
QFile file("path");
file.open(QIODevice::ReadOnly);  // –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏!
QString text = file.readAll();    // –ú–æ–∂–µ—Ç –±—ã—Ç—å –º—É—Å–æ—Ä
file.close();                     // –ò–∑–±—ã—Ç–æ—á–Ω–æ

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
QFile file("path");
if (file.open(QIODevice::ReadOnly | QIODevice::Text)) {
    QString text = QString::fromUtf8(file.readAll());
    // –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ
}

// ‚ùå –ü—É—Ç–∞–Ω–∏—Ü–∞ —Å –ø—É—Ç—è–º–∏
QFile f1("C:/file.txt");     // Windows –∞–±—Å–æ–ª—é—Ç–Ω—ã–π
QFile f2("./config.ini");    // –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π (–æ—Ç —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
QFile f3(":/res/data.txt");  // –†–µ—Å—É—Ä—Å Qt

// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ QDir –¥–ª—è –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç–∏
QString appPath = QCoreApplication::applicationDirPath();
QFile config(QDir(appPath).filePath("config.ini"));
```

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```cpp

// 1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ —á–∏—Ç–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
static QCache<QString, QString> fileCache(10); // –•—Ä–∞–Ω–∏—Ç 10 —Ñ–∞–π–ª–æ–≤

QString getCachedFile(const QString& path)
{
    if (fileCache.contains(path)) {
        return *fileCache.object(path);
    }
    
    QString content = loadTextFile(path);
    fileCache.insert(path, new QString(content));
    return content;
}

// 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ (Qt Concurrent)
QFuture<QString> future = QtConcurrent::run([path]() {
    return loadTextFile(path);
});
// ... –ø–æ—Ç–æ–º future.result()

// 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ QSaveFile –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ–π –∑–∞–ø–∏—Å–∏
QSaveFile saveFile("important.config");
if (saveFile.open(QIODevice::WriteOnly)) {
    saveFile.write(data);
    saveFile.commit(); // –ê—Ç–æ–º–∞—Ä–Ω–∞—è –∑–∞–º–µ–Ω–∞
}
```
___
## üìä –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏¬†`open()`
- –û–±—Ä–∞–±–æ—Ç–∫–∞¬†`errorString()`¬†–ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –í—ã–±–æ—Ä –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (`UTF-8`¬†–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –ó–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ RAII (–Ω–µ –≤—ã–∑—ã–≤–∞—Ç—å¬†`close()`¬†—è–≤–Ω–æ)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ¬†`QIODevice::Text`¬†–¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –ø—É—Ç–∏ (`QDir`,¬†`/`¬†–≤–º–µ—Å—Ç–æ¬†`\`)
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ —á–∏—Ç–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
